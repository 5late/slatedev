<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>slatedev</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <h1>slatedev</h1>
    <div id="pfp">
        <img src="../../imgs/smokingwojak.jpg" alt="pfp" id="profilePicture">
    </div>
    <div class="submiddle">
        <h2>Languages Used: HTML & CSS</h2>
    </div>
    <div class="submiddle">
        <h2 title="so far">Hours: ~10</h2>
    </div>
    <div class="submiddle">
        <h2>What I did</h2>
    </div>
    <div>
        <p class="submiddle">For slatedev, I coded all the pages on the site, linked them together using HTML, CSS and minimal JS. It's all open source at <a href="https://github.com/5late/slatedev" style="background-color: aliceblue;">this GitHub repo</a>!</p>
        <p class="submiddle">I also had to set up a web server to host the files, and serve them to the internet. I then added DNS records to point the domain to the server.</p>
    </div>
    <div class="submiddle">
        <h2>What I learned</h2>
    </div>
    <div class="submiddle">
        <p>How to setup a DNS server.</p>
    </div>
</body>
<script>
    var queries = new URLSearchParams(document.location.search.substring(1))
    var sent_from = queries.get('sf')
    if (sent_from == 'dsc'){
        var sent_from_full = 'discord'
    }else if (sent_from == 'ig'){
        var sent_from_full = 'instagram'
    }else if (sent_from == 'gh'){
        var sent_from_full = 'github'
    } else {
        var sent_from_full = 'random'
    }
    var obj = {}
    obj[sent_from_full] = 1
    window.onload = doStart()

    async function doStart(){
        await getIP()
        POSTtoURL('ips', new_data)
        POSTtoURL('sf', obj)
    }

    async function getIP() {
        await fetch('https://api.ipify.org?format=json').then(response => response.json()).then(data =>{console.log(data, sent_from)
        new_data = {
            IP: data.ip
        }
        POSTtoURL('ips', new_data)
    })
    }

    function POSTtoURL(url, data){
        fetch(`https://api.slatedev.xyz:12443/api/webstat/v1/post/${url}`, {
        method: "POST", 
        body: JSON.stringify(data)
        }).then(res => {
        console.log("Request complete! response:", res);
        });
    }
</script>
</html>